(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{353:function(t,s,a){"use strict";a.r(s);var r=a(12),n=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"저장-프로시저-stored-procedure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#저장-프로시저-stored-procedure"}},[t._v("#")]),t._v(" 저장 프로시저(Stored PROCEDURE)")]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("일련의 쿼리를 마치 하나의 함수처럼 실행하기 위한 쿼리의 집합\n")])])]),s("br"),t._v(" "),s("p",[t._v("데이터베이스에서 SQL을 통해 작업을 하다 보면, 하나의 쿼리문으로 원하는 결과를 얻을 수 없을 때가 생긴다. 원하는 결과물을 얻기 위해 사용할 여러줄의 쿼리문을 한 번의 요청으로 실행하면 좋지 않을까? 또한, 인자 값만 상황에 따라 바뀌고 동일한 로직의 복잡한 쿼리문을 필요할 때마다 작성한다면 비효율적이지 않을까?")]),t._v(" "),s("p",[t._v("이럴 때 사용할 수 있는 것이 바로 프로시저다.")]),t._v(" "),s("br"),t._v(" "),s("img",{attrs:{src:"https://docs.oracle.com/cd/B13789_01/java.101/b12021/img/call_sto.gif"}}),t._v(" "),s("br"),t._v(" "),s("p",[t._v("프로시저를 만들어두면, 애플리케이션에서 여러 상황에 따라 해당 쿼리문이 필요할 때 인자 값만 전달하여 쉽게 원하는 결과물을 받아낼 수 있다.")]),t._v(" "),s("br"),t._v(" "),s("h4",{attrs:{id:"프로시저-생성-및-호출"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-생성-및-호출"}},[t._v("#")]),t._v(" 프로시저 생성 및 호출")]),t._v(" "),s("div",{staticClass:"language-plsql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-plsql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OR")]),t._v(" REPLACE "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PROCEDURE")]),t._v(" 프로시저명"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("변수명"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IN")]),t._v(" 데이터타입"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 변수명"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OUT")]),t._v(" 데이터타입"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 인자 값은 필수 아님")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IS")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n변수명"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" 데이터타입"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n변수명"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" 데이터타입"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("..")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v("\n 필요한 기능"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 인자값 활용 가능")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nEXEC 프로시저명"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 호출")]),t._v("\n")])])]),s("br"),t._v(" "),s("h4",{attrs:{id:"예시1-in"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#예시1-in"}},[t._v("#")]),t._v(" 예시1 (IN)")]),t._v(" "),s("div",{staticClass:"language-plsql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-plsql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OR")]),t._v(" REPLACE "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PROCEDURE")]),t._v(" test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IN")]),t._v(" VARCHAR2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IS")]),t._v("\n\tmsg VARCHAR2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'내 이름은'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v(" \n\tdbms_output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("put_line"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("' '")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nEXEC test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'규글'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("내 이름은 규글\n")])])]),s("br"),t._v(" "),s("h4",{attrs:{id:"예시2-out"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#예시2-out"}},[t._v("#")]),t._v(" 예시2 (OUT)")]),t._v(" "),s("div",{staticClass:"language-plsql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-plsql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OR")]),t._v(" REPLACE "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PROCEDURE")]),t._v(" test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OUT")]),t._v(" VARCHAR2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IS")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v(" \n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Gyoogle'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DECLARE")]),t._v("\nout_name VARCHAR2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v("\ntest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("out_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndbms_output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("put_line"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'내 이름은 '")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("out_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("내 이름은 Gyoogle\n")])])]),s("br"),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"프로시저-장점"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-장점"}},[t._v("#")]),t._v(" 프로시저 장점")]),t._v(" "),s("hr"),t._v(" "),s("ol",[s("li",[s("h4",{attrs:{id:"최적화-캐시"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#최적화-캐시"}},[t._v("#")]),t._v(" 최적화 & 캐시")]),t._v(" "),s("p",[t._v("프로시저의 최초 실행 시 최적화 상태로 컴파일이 되며, 그 이후 프로시저 캐시에 저장된다.")]),t._v(" "),s("p",[t._v("만약 해당 프로세스가 여러번 사용될 때, 다시 컴파일 작업을 거치지 않고 캐시에서 가져오게 된다.")])]),t._v(" "),s("li",[s("h4",{attrs:{id:"유지-보수"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#유지-보수"}},[t._v("#")]),t._v(" 유지 보수")]),t._v(" "),s("p",[t._v("작업이 변경될 때, 다른 작업은 건드리지 않고 프로시저 내부에서 수정만 하면 된다.\n(But, 장점이 단점이 될 수도 있는 부분이기도.. )")])]),t._v(" "),s("li",[s("h4",{attrs:{id:"트래픽-감소"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#트래픽-감소"}},[t._v("#")]),t._v(" 트래픽 감소")]),t._v(" "),s("p",[t._v("클라이언트가 직접 SQL문을 작성하지 않고, 프로시저명에 매개변수만 담아 전달하면 된다. 즉, SQL문이 서버에 이미 저장되어 있기 때문에 클라이언트와 서버 간 네트워크 상 트래픽이 감소된다.")])]),t._v(" "),s("li",[s("h4",{attrs:{id:"보안"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#보안"}},[t._v("#")]),t._v(" 보안")]),t._v(" "),s("p",[t._v("프로시저 내에서 참조 중인 테이블의 접근을 막을 수 있다.")])])]),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"프로시저-단점"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-단점"}},[t._v("#")]),t._v(" 프로시저 단점")]),t._v(" "),s("hr"),t._v(" "),s("ol",[s("li",[s("h4",{attrs:{id:"호환성"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#호환성"}},[t._v("#")]),t._v(" 호환성")]),t._v(" "),s("p",[t._v("구문 규칙이 SQL / PSM 표준과의 호환성이 낮기 때문에 코드 자산으로의 재사용성이 나쁘다.")])]),t._v(" "),s("li",[s("h4",{attrs:{id:"성능"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#성능"}},[t._v("#")]),t._v(" 성능")]),t._v(" "),s("p",[t._v("문자 또는 숫자 연산에서 프로그래밍 언어인 C나 Java보다 성능이 느리다.")])]),t._v(" "),s("li",[s("h4",{attrs:{id:"디버깅"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#디버깅"}},[t._v("#")]),t._v(" 디버깅")]),t._v(" "),s("p",[t._v("에러가 발생했을 때, 어디서 잘못됐는지 디버깅하는 것이 힘들 수 있다.")])])]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("h4",{attrs:{id:"참고-자료"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#참고-자료"}},[t._v("#")]),t._v(" [참고 자료]")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://ko.wikipedia.org/wiki/%EC%A0%80%EC%9E%A5_%ED%94%84%EB%A1%9C%EC%8B%9C%EC%A0%80",target:"_blank",rel:"noopener noreferrer"}},[t._v("링크"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://itability.tistory.com/51",target:"_blank",rel:"noopener noreferrer"}},[t._v("링크"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);